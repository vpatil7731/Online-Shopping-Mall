<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart | Online Shopping Portal</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="media-query.css">

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
</head>
<body>

  <!-- Header -->
  <div class="top-banner">
    <div class="container banner-section flex">
      <div class="hadding">
        <h1>Your Shopping Cart</h1>
      </div>

      <div class="hadder-section flex">
        <a href="index.html" class="back-home"><i class="fa-solid fa-arrow-left"></i> Back</a>
      </div>
    </div>
  </div>

  <!-- Cart Section -->
  <div class="cart-container">
    <div class="container">
      <h2>üõçÔ∏è Items in Your Cart</h2>
      <div id="cart-items"></div>

      <div id="cart-total">
        <h3>Total: ‚Çπ<span id="total-amount">0</span></h3>
        <button id="checkout-btn" class="primary-button">Proceed to Checkout</button>
      </div>
    </div>
  </div>

  <!-- üü¢ Online Payment Section (ADDED) -->
  <div id="payment-section" class="payment-container" style="display:none;">
    <div class="container">
      <h2>üí≥ Secure Online Payment</h2>

      <form id="payment-form">
        <div class="form-group">
          <label for="card-name">Cardholder Name</label>
          <input type="text" id="card-name" placeholder="Enter cardholder name" required>
        </div>

        <div class="form-group">
          <label for="card-number">Card Number</label>
          <input type="text" id="card-number" maxlength="16" placeholder="1234 5678 9012 3456" required>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="expiry">Expiry Date</label>
            <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
          </div>

          <div class="form-group half">
            <label for="cvv">CVV</label>
            <input type="password" id="cvv" maxlength="3" placeholder="‚Ä¢‚Ä¢‚Ä¢" required>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email for Receipt</label>
          <input type="email" id="email" placeholder="you@example.com" required>
        </div>

        <button type="submit" class="primary-button">Pay Now</button>
      </form>
    </div>
  </div>

  <!-- Script -->
  <script>
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const cartItems = document.getElementById("cart-items");
    const totalAmount = document.getElementById("total-amount");

    function renderCart() {
      cartItems.innerHTML = "";

      if (cart.length === 0) {
        cartItems.innerHTML = "<p>Your cart is empty üò¢</p>";
        totalAmount.textContent = "0";
        return;
      }

      let total = 0;
      cart.forEach((item, index) => {
        const itemTotal = item.price * item.qty;
        total += itemTotal;

        const div = document.createElement("div");
        div.classList.add("cart-item");
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="item-info">
            <h4>${item.name}</h4>
            <p>Price: ‚Çπ${item.price}</p>
            <p>Quantity: 
              <button class="qty-btn" onclick="decreaseQty(${index})">-</button>
              ${item.qty}
              <button class="qty-btn" onclick="increaseQty(${index})">+</button>
            </p>
            <p>Total: ‚Çπ${itemTotal}</p>
          </div>
          <button class="remove-btn" onclick="removeItem(${index})">
            <i class="fa-solid fa-trash"></i>
          </button>
        `;
        cartItems.appendChild(div);
      });

      totalAmount.textContent = total;
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    function increaseQty(index) {
      cart[index].qty += 1;
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    function decreaseQty(index) {
      if (cart[index].qty > 1) {
        cart[index].qty -= 1;
      } else {
        cart.splice(index, 1);
      }
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    // Show payment section when checkout is clicked
    document.getElementById("checkout-btn").addEventListener("click", () => {
      document.querySelector(".cart-container").style.display = "none";
      document.getElementById("payment-section").style.display = "block";
      window.scrollTo(0, 0);
    });

    // Payment form submit
    document.getElementById("payment-form").addEventListener("submit", (e) => {
      e.preventDefault();
      alert("‚úÖ Payment Successful! Thank you for your purchase üíñ");
      localStorage.removeItem("cart");
      window.location.href = "index.html";
    });

    renderCart();
  </script>
</body>
</html>
